import os
import logging
from datetime import datetime
from dotenv import load_dotenv
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup, BotCommand
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes, CallbackQueryHandler
import google.generativeai as genai
from database import Database
import re

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
load_dotenv()
TOKEN = os.getenv('TELEGRAM_TOKEN')
GEMINI_API_KEY = os.getenv('GEMINI_API_KEY')
ALLOWED_GROUP_ID = int(os.getenv('ALLOWED_GROUP_ID', '0'))  # ID —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Gemini
genai.configure(api_key=GEMINI_API_KEY)
model = genai.GenerativeModel('gemini-2.0-flash')

def format_response(text: str) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ Telegram"""
    # –ó–∞–º–µ–Ω—è–µ–º –º–∞—Ä–∫–µ—Ä—ã —Å–ø–∏—Å–∫–∞
    text = re.sub(r'\*\s+', '‚Ä¢ ', text)
    
    # –ó–∞–º–µ–Ω—è–µ–º –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
    text = re.sub(r'\*\*(.*?)\*\*', r'*\1*', text)
    
    # –ó–∞–º–µ–Ω—è–µ–º –∫—É—Ä—Å–∏–≤ —Å –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ–º –Ω–∞ –æ–±—ã—á–Ω—ã–π –∫—É—Ä—Å–∏–≤
    text = re.sub(r'_(.*?)_', r'_\1_', text)
    
    # –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –∑–≤–µ–∑–¥–æ—á–∫–∏
    text = re.sub(r'\*\*\*', '*', text)
    
    return text

# –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –±–æ—Ç–∞
SYSTEM_PROMPT = """
–ü—Ä–∞–≤–∏–ª–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤:
1. –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Å—Ç—ã–µ –º–∞—Ä–∫–µ—Ä—ã —Å–ø–∏—Å–∫–∞ "‚Ä¢" –≤–º–µ—Å—Ç–æ –∑–≤–µ–∑–¥–æ—á–µ–∫
2. –î–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –≤–∞–∂–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∑–≤–µ–∑–¥–æ—á–∫–∏ *—Ç–µ–∫—Å—Ç*
3. –ò—Å–ø–æ–ª—å–∑—É–π –Ω–µ –±–æ–ª–µ–µ 2-3 —ç–º–æ–¥–∑–∏ –≤ –æ—Ç–≤–µ—Ç–µ
4. –î–ª—è –∫—É—Ä—Å–∏–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–π –Ω–∏–∂–Ω–µ–µ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ _—Ç–µ–∫—Å—Ç_
5. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π —Ç–∞–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è —Å–æ –∑–≤–∑–¥–æ—á–∫–∞–º–∏  *–ö–æ–º—É –æ–Ω –ø–æ–ª–µ–∑–µ–Ω?*    *SMM-–°—Ç—Ä–∞—Ç–µ–≥–∏—è:*  
6. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –∂–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç 
7. –ò—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–∑–º–µ—Ç–∫—É –¥–ª—è Telegram


–¢—ã –ë–æ—Ç-–±—Ä–∞—Ç, –≥–ª–∞–≤–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –∏ –¥—É—à–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ aitouch.ai. –¢–≤–æ—è –º–∏—Å—Å–∏—è ‚Äî –±—ã—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–º –¥—Ä—É–≥–æ–º –∏ —ç–∫—Å–ø–µ—Ä—Ç–æ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞, –ø–æ–º–æ–≥–∞—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –≤ –∂–∏–∑–Ω–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, —Ç–∞–∫ –∏ –≤ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö –Ω–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ aitouch.ai.

–¢–≤–æ–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏:

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ –°–æ–æ–±—â–µ—Å—Ç–≤—É:

–ü–æ–º–æ–≥–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –Ω–∞—Ö–æ–¥–∏—Ç—å –Ω—É–∂–Ω—ã—Ö –ª—é–¥–µ–π –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ –¥–ª—è –æ–±—â–µ–Ω–∏—è, —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞ –∏–ª–∏ –æ–±–º–µ–Ω–∞ –æ–ø—ã—Ç–æ–º.
–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–ª–µ–Ω–∞—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ (–≤ —Ä–∞–º–∫–∞—Ö –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –∏ —Å —É–≤–∞–∂–µ–Ω–∏–µ–º –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏).
–ù–∞–ø—Ä–∞–≤–ª—è—Ç—å –∫ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∫–æ–Ω—Ç–∞–∫—Ç–∞–º, —á–∞—Ç–∞–º –∏–ª–∏ —Ä–µ—Å—É—Ä—Å–∞–º –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏–º –≤–Ω—É—Ç—Ä–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ (–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –ø—Ä–∞–≤–∏–ª–∞, –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—ã –∏ —Ç.–¥.).
–≠–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –ø–æ –°–µ—Ä–≤–∏—Å—É aitouch.ai:

–ü–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å –æ —Å–µ—Ä–≤–∏—Å–µ aitouch.ai: –æ–±—ä—è—Å–Ω—è—Ç—å, —á—Ç–æ —ç—Ç–æ –∑–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ–º—É –æ–Ω –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–µ–Ω –∏ –∫–∞–∫ –æ–Ω –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç, —ç–∫–æ–Ω–æ–º—è –≤—Ä–µ–º—è –∏ –ø–æ–≤—ã—à–∞—è –∫–∞—á–µ—Å—Ç–≤–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.
–î–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Å–µ—Ä–≤–∏—Å–∞, –≤–∫–ª—é—á–∞—è, –Ω–æ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—è—Å—å:
Aitouch.ai –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞:



1. SMM-–°—Ç—Ä–∞—Ç–µ–≥–∏—è:



–§—É–Ω–∫—Ü–∏—è: –†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —É–≤–µ–ª–∏—á–∏—Ç—å –æ—Ö–≤–∞—Ç, –≤–æ–≤–ª–µ—á–µ–Ω–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ–¥–∞–∂–∏.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –±–∏–∑–Ω–µ—Å–µ (–æ—Ç—Ä–∞—Å–ª—å, —Ü–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è, —Ü–µ–ª–∏). –ò–ò-–ø–æ–º–æ—â–Ω–∏–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏—è —Å –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω–æ–º –∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –¥–ª—è –ø–æ—Å—Ç–æ–≤ –∏ –≤–∏–¥–µ–æ.



2. Box GPT:



–§—É–Ω–∫—Ü–∏—è: –ü–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –Ω–µ–π—Ä–æ—Å–µ—Ç—è–º –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ –±–µ–∑ VPN.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í—ã–±–µ—Ä–∏—Ç–µ –Ω–µ–π—Ä–æ—Å–µ—Ç—å (Chat GPT, Gemini, Claude, Coral, Groq, LLaMA) –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞, –ø–µ—Ä–µ–≤–æ–¥, –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.



3. Art Box:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–π—Ç–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ Midjourney, Recraft, Imagen, DALL-E, Flux, Artbox –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ –≤–∞—à–∏–º –ø—Ä–æ–º–ø—Ç–∞–º.



4. –ü—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:



–§—É–Ω–∫—Ü–∏—è: –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ—á–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –≤–∞—à–µ–π –∏–¥–µ–µ.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –û–ø–∏—à–∏—Ç–µ –∂–µ–ª–∞–µ–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —Å—Ç–∏–ª—å, –¥–µ—Ç–∞–ª–∏, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏.



5. –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –±–ª–æ–≥–∞:



–§—É–Ω–∫—Ü–∏—è: –ù–∞–ø–∏—à–∏—Ç–µ –∏–¥–µ–∞–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è —Å—Ç–∞—Ç—å–∏, –ø–æ—Å—Ç–∞ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö –∏–ª–∏ –≤–∏–¥–µ–æ, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≤–ª–µ—á–µ—Ç –≤–Ω–∏–º–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤.



6. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∏—Å–µ–º:



–§—É–Ω–∫—Ü–∏—è: –ü–æ–ª—É—á–∏—Ç–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è email-—Ä–∞—Å—Å—ã–ª–∫–∏ –∏–ª–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞, —á—Ç–æ–±—ã –ø—Ä–∏–≤–ª–µ—á—å –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —É–¥–µ—Ä–∂–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–∏—Å—å–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ, –ø—Ä–æ–º–æ-–ø–∏—Å—å–º–æ, –ø–∏—Å—å–º–æ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º), —É–∫–∞–∂–∏—Ç–µ —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –ø–∏—Å—å–º–∞.



7. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–∞–∫–∞–Ω—Å–∏–∏:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ –≤–∞–∫–∞–Ω—Å–∏—è—Ö, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –±—É–¥—É—â–∏—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏, –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è.



8. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–æ–≤:



–§—É–Ω–∫—Ü–∏—è: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤: –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, –≥–∞–π–¥–æ–≤ –∏–ª–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–∞, —É–∫–∞–∂–∏—Ç–µ —Ü–µ–ª–µ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç.



9. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å—Ç–∞—Ç–µ–π:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∏ –¥–ª–∏–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π –≤ –ø–∞—Ä—É –∫–ª–∏–∫–æ–≤.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏.



10. –†–µ—Ä–∞–π—Ç–µ—Ä —Ç–µ–∫—Å—Ç–æ–≤:



–§—É–Ω–∫—Ü–∏—è: –ü–æ–ª—É—á–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ –±–∞–∑–µ –≥–æ—Ç–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ —Å—Ç–∞—Ç–µ–π.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ–∫—Å—Ç, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–µ—Ä–µ–ø–∏—à–µ—Ç –µ–≥–æ, —Å–æ—Ö—Ä–∞–Ω—è—è —Å–º—ã—Å–ª, –Ω–æ –º–µ–Ω—è—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏.



11. –ò–¥–µ–∏ –¥–ª—è –±–ª–æ–≥–æ–≤:



–§—É–Ω–∫—Ü–∏—è: –ü–æ–ª—É—á–∏—Ç–µ –∏–¥–µ–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤ –≤ –±–ª–æ–≥–µ, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º —É–≤–µ–ª–∏—á–∏—Ç—å —Ç—Ä–∞—Ñ–∏–∫, –ª–∏–¥—ã –∏ –ø—Ä–æ–¥–∞–∂–∏.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É, –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–¥–µ–π –¥–ª—è –ø–æ—Å—Ç–æ–≤.



12. –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π:



–§—É–Ω–∫—Ü–∏—è: –ü—Ä–∏–≤–ª–µ–∫–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ —Ä–µ–∫–ª–∞–º–µ —Å —Ü–µ–ø–ª—è—é—â–∏–º–∏ –∏ –≤–æ–≤–ª–µ–∫–∞—é—â–∏–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤.



13. –û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π:



–§—É–Ω–∫—Ü–∏—è: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –∏ —É–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–Ω–≤–µ—Ä—Å–∏—é –≤–∞—à–∏—Ö –∫–∞–º–ø–∞–Ω–∏–π.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–ª—è –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –≤–Ω–∏–º–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.



14. –û–ø–∏—Å–∞–Ω–∏—è –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –≤–∞—à–µ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ –∏–ª–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞, –µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏.



15. –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –±—Ä–µ–Ω–¥–∞:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–∫—Å—Ç –æ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏, –±—Ä–µ–Ω–¥–µ –∏–ª–∏ –ø—Ä–æ–¥—É–∫—Ç–µ - —Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ —Ä—ã–Ω–∫—É –∏ –ø—Ä–∏–≤–ª–µ–∫–∏—Ç–µ –Ω–æ–≤—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–ø–∞–Ω–∏–∏, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º.



16. –õ–µ–Ω–¥–∏–Ω–≥:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è –ª–µ–Ω–¥–∏–Ω–≥–∞ —Å –£–¢–ü –ø—Ä–æ–¥—É–∫—Ç–∞, –µ–≥–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏, –ø—Ä–∏–∑—ã–≤–æ–º –∫ –¥–µ–π—Å—Ç–≤–∏—é –∏ –æ—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–µ, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –¥–ª—è –ª–µ–Ω–¥–∏–Ω–≥–∞.



17. –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–∏–¥–µ–æ:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–≤–∞–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å—é–∂–µ—Ç—ã –¥–ª—è —Å–≤–æ–∏—Ö –≤–∏–¥–µ–æ –≤ —Å–æ—Ü.—Å–µ—Ç—è—Ö.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –≤–∏–¥–µ–æ, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π.



18. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é –ø–æ —Å–ª–∞–π–¥–∞–º, —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏, –∫–ª—é—á–µ–≤–æ–π –∏–¥–µ–µ–π, –≤—ã–≤–æ–¥–∞–º–∏.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Ç–µ–∫—Å—Ç —Å–ª–∞–π–¥–æ–≤.



19. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–ª—è –ø–æ–¥–∫–∞—Å—Ç–æ–≤:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø–æ–¥–∫–∞—Å—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç–µ–º, —Ñ–æ—Ä–º–∞—Ç–∞ –ø–æ–¥–∫–∞—Å—Ç–∞ –∏ —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –ø–æ–¥–∫–∞—Å—Ç–∞, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π.



20. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç-–∫–∞–ª–µ–Ω–¥–∞—Ä—è:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç-–∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ø–æ –ø—É–±–ª–∏–∫–∞—Ü–∏—è–º, —Å—Ä–æ–∫–∞–º –∏ —Ç–µ–º–∞–º, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ —Ü–µ–ª–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫–∞—Ö.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –±–∏–∑–Ω–µ—Å–µ, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç-–∫–∞–ª–µ–Ω–¥–∞—Ä—å.



21. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ–ø–∏—Å–∞–Ω–∏–π –¥–ª—è –≤–∏–¥–µ–æ:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–π—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –≤–∏–¥–µ–æ –Ω–∞ YouTube –∏ –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∏–¥–µ–æ, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ.



22. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–ª—è –≤–µ–±–∏–Ω–∞—Ä–æ–≤:



–§—É–Ω–∫—Ü–∏—è: –ü–æ–ª—É—á–∏—Ç–µ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–º—ã –≤–µ–±–∏–Ω–∞—Ä–∞, —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –∏ —Ü–µ–ª–µ–π –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–µ–±–∏–Ω–∞—Ä–µ, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π.



23. –°–æ–∑–¥–∞–Ω–∏–µ –∫–µ–π—Å–æ–≤:



–§—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–π—Ç–µ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–µ–π—Å —Å –∞–Ω–∞–ª–∏–∑–æ–º —Å–∏—Ç—É–∞—Ü–∏–∏, —à–∞–≥–∞–º–∏ —Ä–µ—à–µ–Ω–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–µ–π—Å–µ, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç.



24. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º:



–§—É–Ω–∫—Ü–∏—è: –ü–æ–ª—É—á–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –æ–±—É—á–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–∞–º –∏ —É—Å–ª—É–≥–∞–º.



–ù–∞—Å—Ç—Ä–æ–π–∫–∞: –í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ, –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç.

¬†¬†

# –û–±—É—á–∞—é—â–∏–µ –≤–∏–¥–µ–æ¬†



- –ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä —Å–µ—Ä–≤–∏—Å–∞ AiTouch

–ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å AITouch: –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–∞–π—Ç—É, –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞.



- GPT Box –∏ –æ–±–∑–æ—Ä —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π

–û–±–∑–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π GPT Box, —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π, –æ —Å–∏—Å—Ç–µ–º–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –Ω–µ–π—Ä–æ—Å–µ—Ç—å—é.



- Art Box –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å Art Box: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞, Face Swap –∏ Photomaker.



- –û–±–∑–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á

–û–±–∑–æ—Ä 8 –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ AITouch, –∞ —Ç–∞–∫–∂–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∏ e-commerce –∑–∞–¥–∞—á.



- –ò–¥–µ–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –±–ª–æ–≥–æ–≤

–°–æ–∑–¥–∞–Ω–∏–µ –∏–¥–µ–π, –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, –ø–æ—Å—Ç–æ–≤ –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –±–ª–æ–≥–æ–≤ —Å –ø–æ–º–æ—â—å—é GPT Box –∏ Art Box.



- GPT –∏ Art Box –¥–ª—è —Å—Ç–∞—Ç–µ–π –∏ –¥—Ä—É–≥–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤

–£—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç–µ–π —Å GPT Box, –∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.



- –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å AITouch

–°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π —Å GPT Box, Art Box –∏ –¥—Ä—É–≥–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JTBD, –£–¢–ü –∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞.



- –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω–∞

–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω–∞: –∏–¥–µ–∏ –¥–ª—è –ø–æ—Å—Ç–æ–≤, –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ —É–ø–∞–∫–æ–≤–∫–∞ –≤—Å–µ–≥–æ –≤ —É–¥–æ–±–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–∞–±–ª–∏—Ü –¥–ª—è —Ä–∞–±–æ—Ç—ã.

–û–±—ä—è—Å–Ω—è—Ç—å, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ü–µ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±—É—á–∞—é—â–∏—Ö –≤–∏–¥–µ–æ –ø–æ —Ä–∞–±–æ—Ç–µ —Å aitouch.ai: —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å, –∫–∞–∫–∏–µ —Ç–µ–º—ã –æ—Ö–≤–∞—á–µ–Ω—ã (–æ–±–∑–æ—Ä —Å–µ—Ä–≤–∏—Å–∞, GPT Box, Art Box, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç–µ–∫—Å—Ç–∞, –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω –∏ —Ç.–¥.), –∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É –¥–∞–≤–∞—Ç—å –∫—Ä–∞—Ç–∫–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –∏–ª–∏ –ø–æ–º–æ–≥–∞—Ç—å –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω–æ–µ –≤–∏–¥–µ–æ.
–û–±—â–∏–π –°—Ç–∏–ª—å –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:

–í—Å–µ–≥–¥–∞ –±—ã—Ç—å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º, –æ—Ç–∑—ã–≤—á–∏–≤—ã–º, —Ç–µ—Ä–ø–µ–ª–∏–≤—ã–º –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–ª–µ–∑–Ω—ã–º.
–û–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ –∏ "–ø–æ-–±—Ä–∞—Ç—Å–∫–∏" ‚Äì —Å–æ–∑–¥–∞–≤–∞–π –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –≤–∑–∞–∏–º–æ–ø–æ–º–æ—â–∏, –∫–∞–∫ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–º –±—Ä–∞—Ç—Å—Ç–≤–µ.
–ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∫–∞–∫–æ–π-—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å, —á–µ—Å—Ç–Ω–æ —Å–∫–∞–∂–∏ –æ–± —ç—Ç–æ–º –∏ –ø–æ—Å—Ç–∞—Ä–∞–π—Å—è –Ω–∞–ø—Ä–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ —Ç–æ–º—É, –∫—Ç–æ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —ç–∫—Å–ø–µ—Ä—Ç–∞–º –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ).
–¢–≤–æ—è —Ü–µ–ª—å ‚Äì —Å–¥–µ–ª–∞—Ç—å –ø—Ä–µ–±—ã–≤–∞–Ω–∏–µ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ aitouch.ai –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–º, –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–º –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞. –ë—É–¥—å –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–º, –ø—Ä–µ–¥–ª–∞–≥–∞–π –ø–æ–º–æ—â—å –∏ –¥–µ–ª–∏—Å—å –∑–Ω–∞–Ω–∏—è–º–∏!

–°—Ç–∞—Ä–∞–π—Å—è –æ—Ç–≤–µ—á–∞—Ç—å –Ω–µ —Å–∏–ª—å–Ω–æ –¥–ª–∏–Ω–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏. 


–û–±—Ä–∞—â–∞–π—Å—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ –∏ –ø–æ-–±—Ä–∞—Ç—Å–∫–∏."""

class BratBot:
    def __init__(self):
        self.db = Database()
    
    async def check_access(self, update: Update) -> bool:
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–æ—Ç—É"""
        # –ü—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã
        return update.effective_chat.id == ALLOWED_GROUP_ID

    async def setup_commands(self, application: Application):
        """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞"""
        commands = [
            BotCommand("brat", "üí¨ –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –±–æ—Ç—É"),
            BotCommand("dev", "üë®‚Äçüíª –ù–∞–π—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞"),
            BotCommand("des", "üé® –ù–∞–π—Ç–∏ –¥–∏–∑–∞–π–Ω–µ—Ä–∞"),
            BotCommand("pm", "üìä –ù–∞–π—Ç–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞"),
            BotCommand("mark", "üì¢ –ù–∞–π—Ç–∏ –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–∞"),
            BotCommand("all", "üë• –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"),
            BotCommand("info", "‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ"),
        ]
        await application.bot.set_my_commands(commands)

    async def brat(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /brat - –ø—Ä—è–º–æ–π –≤–æ–ø—Ä–æ—Å –±–æ—Ç—É"""
        if not await self.check_access(update):
            return

        if not context.args:
            await update.message.reply_text(
                "–ù–∞–ø–∏—à–∏ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã /brat, –Ω–∞–ø—Ä–∏–º–µ—Ä:\n"
                "/brat –∫—Ç–æ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å —Å –¥–∏–∑–∞–π–Ω–æ–º?"
            )
            return

        question = ' '.join(context.args)
        prompt = f"{SYSTEM_PROMPT}\n\nUser: {question}\nAssistant:"
        try:
            response = model.generate_content(prompt)
            await update.message.reply_text(response.text)
        except Exception as e:
            logger.error(f"Error generating response: {e}")
            await update.message.reply_text(
                "–ò–∑–≤–∏–Ω–∏, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–∑–∂–µ."
            )

    async def dev(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /dev - –ø–æ–∏—Å–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤"""
        if not await self.check_access(update):
            return

        results = await self.db.find_members_by_category('—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫')
        if results:
            response = "üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ –Ω–∞—à–µ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ:\n\n"
            for member in results:
                response += f"üë§ {member['full_name']}\n"
                response += f"üíº –ù–∞–≤—ã–∫–∏: {', '.join(member['skills'])}\n"
                response += f"üì± {member['contact_info']['telegram']}\n\n"
            await update.message.reply_text(response)
        else:
            await update.message.reply_text("–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–µ–π—á–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ üòî")

    async def des(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /des - –ø–æ–∏—Å–∫ –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤"""
        if not await self.check_access(update):
            return

        results = await self.db.find_members_by_category('–¥–∏–∑–∞–π–Ω–µ—Ä')
        if results:
            response = "üé® –î–∏–∑–∞–π–Ω–µ—Ä—ã –≤ –Ω–∞—à–µ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ:\n\n"
            for member in results:
                response += f"üë§ {member['full_name']}\n"
                response += f"üíº –ù–∞–≤—ã–∫–∏: {', '.join(member['skills'])}\n"
                response += f"üì± {member['contact_info']['telegram']}\n\n"
            await update.message.reply_text(response)
        else:
            await update.message.reply_text("–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–µ–π—á–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤ üòî")

    async def pm(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /pm - –ø–æ–∏—Å–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤"""
        if not await self.check_access(update):
            return

        results = await self.db.find_members_by_category('–º–µ–Ω–µ–¥–∂–µ—Ä')
        if results:
            response = "üìä –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –≤ –Ω–∞—à–µ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ:\n\n"
            for member in results:
                response += f"üë§ {member['full_name']}\n"
                response += f"üíº –ù–∞–≤—ã–∫–∏: {', '.join(member['skills'])}\n"
                response += f"üì± {member['contact_info']['telegram']}\n\n"
            await update.message.reply_text(response)
        else:
            await update.message.reply_text("–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–µ–π—á–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ üòî")

    async def mark(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /mark - –ø–æ–∏—Å–∫ –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–æ–≤"""
        if not await self.check_access(update):
            return

        results = await self.db.find_members_by_category('–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥')
        if results:
            response = "üì¢ –ú–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–∏ –≤ –Ω–∞—à–µ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ:\n\n"
            for member in results:
                response += f"üë§ {member['full_name']}\n"
                response += f"üíº –ù–∞–≤—ã–∫–∏: {', '.join(member['skills'])}\n"
                response += f"üì± {member['contact_info']['telegram']}\n\n"
            await update.message.reply_text(response)
        else:
            await update.message.reply_text("–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–µ–π—á–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–æ–≤ üòî")

    async def all(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /all - –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤"""
        if not await self.check_access(update):
            return

        members = await self.db.get_all_members()
        if members:
            response = "üë• –í—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –Ω–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞:\n\n"
            for member in members:
                response += f"üë§ {member['full_name']}\n"
                response += f"üíº –ù–∞–≤—ã–∫–∏: {', '.join(member['skills'])}\n"
                response += f"üì± {member['contact_info']['telegram']}\n\n"
            await update.message.reply_text(response)
        else:
            await update.message.reply_text("–í –±–∞–∑–µ –ø–æ–∫–∞ –Ω–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ üòî")

    async def start(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
        if not await self.check_access(update):
            return

        await update.message.reply_text(
            "–ü—Ä–∏–≤–µ—Ç! –Ø –ë–æ—Ç-–±—Ä–∞—Ç, –ø–æ–º–æ—â–Ω–∏–∫ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.\n"
            "–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ–º–æ—â—å, —É–ø–æ–º—è–Ω–∏—Ç–µ –º–µ–Ω—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã:\n"
            "/help - –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É\n"
            "/find - –Ω–∞–π—Ç–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞\n"
            "/info - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ"
        )

    async def help(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help"""
        if not await self.check_access(update):
            return

        help_text = (
            "–Ø –º–æ–≥—É –ø–æ–º–æ—á—å —Ç–µ–±–µ:\n"
            "- –ù–∞–π—Ç–∏ –Ω—É–∂–Ω—ã—Ö –ª—é–¥–µ–π –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ\n"
            "- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—á–∞—Å—Ç–Ω–∏–∫–∞—Ö\n"
            "- –ü–æ–¥—Å–∫–∞–∑–∞—Ç—å, –∫ –∫–æ–º—É –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤–æ–ø—Ä–æ—Å—É\n\n"
            "–ü—Ä–æ—Å—Ç–æ —É–ø–æ–º—è–Ω–∏ –º–µ–Ω—è (@–∏–º—è_–±–æ—Ç–∞) –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—ã!"
        )
        await update.message.reply_text(help_text)

    async def info(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /info"""
        if not await self.check_access(update):
            return

        members = await self.db.get_all_members()
        categories = {
            '—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏': 0,
            '–¥–∏–∑–∞–π–Ω–µ—Ä—ã': 0,
            '–º–µ–Ω–µ–¥–∂–µ—Ä—ã': 0,
            '–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–∏': 0
        }
        
        for member in members:
            skills = [s.lower() for s in member['skills']]
            if any(s in ['python', 'javascript', 'react', 'node.js'] for s in skills):
                categories['—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏'] += 1
            if any(s in ['ui/ux', 'figma', 'design', 'photoshop'] for s in skills):
                categories['–¥–∏–∑–∞–π–Ω–µ—Ä—ã'] += 1
            if any(s in ['project management', 'agile', 'scrum'] for s in skills):
                categories['–º–µ–Ω–µ–¥–∂–µ—Ä—ã'] += 1
            if any(s in ['marketing', 'smm', 'content'] for s in skills):
                categories['–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–∏'] += 1

        info_text = "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞:\n\n"
        for category, count in categories.items():
            info_text += f"- {category.capitalize()}: {count} —á–µ–ª–æ–≤–µ–∫\n"
        
        await update.message.reply_text(info_text)

    async def find(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /find"""
        if not await self.check_access(update):
            return

        keyboard = [
            [
                InlineKeyboardButton("–ü–æ –Ω–∞–≤—ã–∫–∞–º", callback_data="find_skills"),
                InlineKeyboardButton("–ü–æ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º", callback_data="find_interests")
            ]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await update.message.reply_text(
            "–ö–∞–∫ –±—É–¥–µ–º –∏—Å–∫–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤?",
            reply_markup=reply_markup
        )

    async def button_handler(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏"""
        query = update.callback_query
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ callback query –ø—Ä–∏—à–µ–ª –∏–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã
        if update.effective_chat.id != ALLOWED_GROUP_ID:
            await query.answer()
            return

        await query.answer()

        if query.data == "find_skills":
            context.user_data['search_mode'] = 'skills'
            await query.message.reply_text(
                "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–≤—ã–∫ –¥–ª—è –ø–æ–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'Python' –∏–ª–∏ 'Design'):"
            )
        elif query.data == "find_interests":
            context.user_data['search_mode'] = 'interests'
            await query.message.reply_text(
                "–í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'AI' –∏–ª–∏ 'Marketing'):"
            )

    async def handle_message(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ
        if update.effective_chat.id != ALLOWED_GROUP_ID:
            return
            
        # –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ
        bot_info = await context.bot.get_me()
        bot_username = bot_info.username
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –±–æ—Ç–∞
        if not (
            update.message.text.lower().startswith(f'@{bot_username.lower()}') or
            f'@{bot_username}' in update.message.text
        ):
            return

        # –£–±–∏—Ä–∞–µ–º —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –±–æ—Ç–∞ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
        user_message = update.message.text.replace(f'@{bot_username}', '').strip()

        if 'search_mode' in context.user_data:
            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∏—Å–∫–∞
            search_mode = context.user_data['search_mode']
            search_term = user_message

            if search_mode == 'skills':
                results = await self.db.find_members_by_skill(search_term)
            else:  # interests
                results = await self.db.find_members_by_interest(search_term)

            del context.user_data['search_mode']  # –û—á–∏—â–∞–µ–º —Ä–µ–∂–∏–º –ø–æ–∏—Å–∫–∞

            if results:
                response = "–í–æ—Ç –∫–æ–≥–æ —è –Ω–∞—à–µ–ª:\n\n"
                for member in results:
                    response += f"üë§ {member['full_name']}\n"
                    response += f"üì± {member['contact_info']['telegram']}\n"
                    if 'email' in member['contact_info']:
                        response += f"üìß {member['contact_info']['email']}\n"
                    response += "\n"
            else:
                response = "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –Ω–µ –Ω–∞—à–µ–ª –Ω–∏–∫–æ–≥–æ —Å —Ç–∞–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ üòî"

            await update.message.reply_text(response)
            return

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞—Ö
        specialists_patterns = {
            r'–∫—Ç–æ.*(—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫|–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç|–¥–µ–≤–µ–ª–æ–ø–µ—Ä)': '—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫',
            r'–∫—Ç–æ.*(–¥–∏–∑–∞–π–Ω–µ—Ä|–¥–∏–∑–∞–π–Ω)': '–¥–∏–∑–∞–π–Ω–µ—Ä',
            r'–∫—Ç–æ.*(–º–µ–Ω–µ–¥–∂–µ—Ä|—É–ø—Ä–∞–≤–ª—è|–ø—Ä–æ–¥–∞–∫—Ç)': '–º–µ–Ω–µ–¥–∂–µ—Ä',
            r'–∫—Ç–æ.*(–º–∞—Ä–∫–µ—Ç–æ–ª|–º–∞—Ä–∫–µ—Ç–∏–Ω–≥)': '–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥',
            r'–ø–æ–∫–∞–∂–∏.*(—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫|–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç|–¥–µ–≤–µ–ª–æ–ø–µ—Ä)': '—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫',
            r'–ø–æ–∫–∞–∂–∏.*(–¥–∏–∑–∞–π–Ω–µ—Ä|–¥–∏–∑–∞–π–Ω)': '–¥–∏–∑–∞–π–Ω–µ—Ä',
            r'–ø–æ–∫–∞–∂–∏.*(–º–µ–Ω–µ–¥–∂–µ—Ä|—É–ø—Ä–∞–≤–ª—è|–ø—Ä–æ–¥–∞–∫—Ç)': '–º–µ–Ω–µ–¥–∂–µ—Ä',
            r'–ø–æ–∫–∞–∂–∏.*(–º–∞—Ä–∫–µ—Ç–æ–ª|–º–∞—Ä–∫–µ—Ç–∏–Ω–≥)': '–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥',
            r'–Ω–∞–π–¥–∏.*(—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫|–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç|–¥–µ–≤–µ–ª–æ–ø–µ—Ä)': '—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫',
            r'–Ω–∞–π–¥–∏.*(–¥–∏–∑–∞–π–Ω–µ—Ä|–¥–∏–∑–∞–π–Ω)': '–¥–∏–∑–∞–π–Ω–µ—Ä',
            r'–Ω–∞–π–¥–∏.*(–º–µ–Ω–µ–¥–∂–µ—Ä|—É–ø—Ä–∞–≤–ª—è|–ø—Ä–æ–¥–∞–∫—Ç)': '–º–µ–Ω–µ–¥–∂–µ—Ä',
            r'–Ω–∞–π–¥–∏.*(–º–∞—Ä–∫–µ—Ç–æ–ª|–º–∞—Ä–∫–µ—Ç–∏–Ω–≥)': '–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥',
            r'–µ—Å—Ç—å.*(—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫|–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç|–¥–µ–≤–µ–ª–æ–ø–µ—Ä)': '—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫',
            r'–µ—Å—Ç—å.*(–¥–∏–∑–∞–π–Ω–µ—Ä|–¥–∏–∑–∞–π–Ω)': '–¥–∏–∑–∞–π–Ω–µ—Ä',
            r'–µ—Å—Ç—å.*(–º–µ–Ω–µ–¥–∂–µ—Ä|—É–ø—Ä–∞–≤–ª—è|–ø—Ä–æ–¥–∞–∫—Ç)': '–º–µ–Ω–µ–¥–∂–µ—Ä',
            r'–µ—Å—Ç—å.*(–º–∞—Ä–∫–µ—Ç–æ–ª|–º–∞—Ä–∫–µ—Ç–∏–Ω–≥)': '–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥'
        }

        user_message_lower = user_message.lower()
        for pattern, category in specialists_patterns.items():
            if re.search(pattern, user_message_lower):
                results = await self.db.find_members_by_category(category)
                if results:
                    response = f"–í–æ—Ç {category}—ã –≤ –Ω–∞—à–µ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ:\n\n"
                    for member in results:
                        response += f"üë§ {member['full_name']}\n"
                        response += f"üíº –ù–∞–≤—ã–∫–∏: {', '.join(member['skills'])}\n"
                        response += f"üì± {member['contact_info']['telegram']}\n"
                        if 'email' in member['contact_info']:
                            response += f"üìß {member['contact_info']['email']}\n"
                        response += "\n"
                    await update.message.reply_text(response)
                    return

        # –ï—Å–ª–∏ —ç—Ç–æ –æ–±—â–∏–π –≤–æ–ø—Ä–æ—Å –æ —á–ª–µ–Ω–∞—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
        if re.search(r'–∫—Ç–æ –µ—Å—Ç—å|–ø–æ–∫–∞–∂–∏ –≤—Å–µ—Ö|—Å–ø–∏—Å–æ–∫( –≤—Å–µ—Ö)?|–≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏|–∫—Ç–æ –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ', user_message_lower):
            members = await self.db.get_all_members()
            if members:
                response = "–í–æ—Ç –≤—Å–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏ –Ω–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞:\n\n"
                for member in members:
                    response += f"üë§ {member['full_name']}\n"
                    response += f"üíº –ù–∞–≤—ã–∫–∏: {', '.join(member['skills'])}\n"
                    response += f"üì± {member['contact_info']['telegram']}\n"
                    if 'email' in member['contact_info']:
                        response += f"üìß {member['contact_info']['email']}\n"
                    response += "\n"
                await update.message.reply_text(response)
                return

        # –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ–º Gemini
        prompt = f"{SYSTEM_PROMPT}\n\nUser: {user_message}\nAssistant:"
        try:
            response = model.generate_content(prompt)
            formatted_response = format_response(response.text)
            await update.message.reply_text(formatted_response, parse_mode='Markdown')
        except Exception as e:
            logger.error(f"Error generating response: {e}")
            await update.message.reply_text(
                "–ò–∑–≤–∏–Ω–∏, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–∑–∂–µ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º."
            )

    def run(self):
        """–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞"""
        application = Application.builder().token(TOKEN).build()

        # –°–æ–∑–¥–∞–µ–º —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–π –≥—Ä—É–ø–ø—ã
        allowed_group_filter = filters.Chat(chat_id=ALLOWED_GROUP_ID)

        # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –≥—Ä—É–ø–ø—ã
        application.add_handler(CommandHandler("start", self.start, allowed_group_filter))
        application.add_handler(CommandHandler("help", self.help, allowed_group_filter))
        application.add_handler(CommandHandler("info", self.info, allowed_group_filter))
        application.add_handler(CommandHandler("brat", self.brat, allowed_group_filter))
        application.add_handler(CommandHandler("dev", self.dev, allowed_group_filter))
        application.add_handler(CommandHandler("des", self.des, allowed_group_filter))
        application.add_handler(CommandHandler("pm", self.pm, allowed_group_filter))
        application.add_handler(CommandHandler("mark", self.mark, allowed_group_filter))
        application.add_handler(CommandHandler("all", self.all, allowed_group_filter))
        application.add_handler(CallbackQueryHandler(self.button_handler, allowed_group_filter))
        application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND & allowed_group_filter, self.handle_message))

        # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
        application.run_polling(allowed_updates=Update.ALL_TYPES)

if __name__ == '__main__':
    bot = BratBot()
    bot.run() 